unit U_Cadastro;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, FireDAC.Stan.Intf, FireDAC.Stan.Option,
  FireDAC.Stan.Error, FireDAC.UI.Intf, FireDAC.Phys.Intf, FireDAC.Stan.Def,
  FireDAC.Stan.Pool, FireDAC.Stan.Async, FireDAC.Phys, FireDAC.Phys.PG,
  FireDAC.Phys.PGDef, FireDAC.VCLUI.Wait, FireDAC.Stan.Param, FireDAC.DatS,
  FireDAC.DApt.Intf, FireDAC.DApt, Data.DB, FireDAC.Comp.DataSet,
  FireDAC.Comp.Client, Vcl.ExtCtrls, Vcl.DBCtrls, Vcl.StdCtrls, Vcl.Mask,
  Vcl.Grids, Vcl.DBGrids, Vcl.Buttons;

type
  TFrm_cadastro = class(TForm)
    Conexao: TFDConnection;
    Q_contato: TFDQuery;
    Ds_contato: TDataSource;
    Panel1: TPanel;
    Panel2: TPanel;
    Q_contatoid_contato: TIntegerField;
    Q_contatonome: TWideStringField;
    Q_contatoapelido: TWideStringField;
    Q_contatotelefone: TWideStringField;
    Q_contatocelular: TWideStringField;
    Q_contatoemail: TWideStringField;
    Q_contatoendereco: TWideStringField;
    Q_contatobairro: TWideStringField;
    Q_contatocidade: TWideStringField;
    Q_contatouf: TWideStringField;
    Q_contatocep: TWideStringField;
    Q_contatodata_cadastro: TDateField;
    Label1: TLabel;
    DBID_contato: TDBEdit;
    Label2: TLabel;
    DBENome: TDBEdit;
    Label3: TLabel;
    DBEApelido: TDBEdit;
    Label4: TLabel;
    DBEtelefone: TDBEdit;
    Label5: TLabel;
    DBECelular: TDBEdit;
    Label6: TLabel;
    DBEMail: TDBEdit;
    Label7: TLabel;
    DBEEndereco: TDBEdit;
    Label8: TLabel;
    DBEBairro: TDBEdit;
    Label9: TLabel;
    DBECidade: TDBEdit;
    Label10: TLabel;
    DBEditUF: TDBEdit;
    Label11: TLabel;
    DBECep: TDBEdit;
    Label12: TLabel;
    DBE_Dat_Cadastro: TDBEdit;
    Bt_novo: TBitBtn;
    Bt_editar: TBitBtn;
    Bt_deletar: TBitBtn;
    Bt_gravar: TBitBtn;
    Bt_cancelar: TBitBtn;
    Bt_atualizar: TBitBtn;
    Bt_sair: TBitBtn;
    Panel3: TPanel;
    DBNavigator1: TDBNavigator;
    procedure FormShow(Sender: TObject);
    procedure Bt_sairClick(Sender: TObject);
    procedure Bt_novoClick(Sender: TObject);
    procedure Bt_editarClick(Sender: TObject);
    procedure Bt_cancelarClick(Sender: TObject);
    procedure Bt_gravarClick(Sender: TObject);
    procedure Bt_deletarClick(Sender: TObject);
    procedure Bt_atualizarClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Frm_cadastro: TFrm_cadastro;

implementation

{$R *.dfm}

procedure TFrm_cadastro.Bt_atualizarClick(Sender: TObject);
begin
  Q_contato.Refresh;
end;

procedure TFrm_cadastro.Bt_cancelarClick(Sender: TObject);
begin
  Q_contato.Cancel;
end;

              //condiçao do botao excluir
procedure TFrm_cadastro.Bt_deletarClick(Sender: TObject);
begin
  if MessageDlg('Deseja deletar o cadastro?', mtConfirmation, [mbyes,mbNo], 0)= mrOK then
    begin
      Q_contato.Delete;
    end
    else
      abort;
end;

procedure TFrm_cadastro.Bt_editarClick(Sender: TObject);
begin
  Q_contato.Edit;
end;

procedure TFrm_cadastro.Bt_gravarClick(Sender: TObject);
begin
  Q_contato.Post;
  Messagedlg('Registro salvo com sucesso',mtInformation, [mbok], 0);
end;

procedure TFrm_cadastro.Bt_novoClick(Sender: TObject);
  var prox: integer;
begin
  Q_contato.Active := true;
  Q_contato.Last;
  prox := Q_contatoid_contato.AsInteger + 1;
  Q_contato.Append;
  Q_contatoid_contato.AsInteger := prox;
  DBENome.SetFocus;
end;

  //CONDIÇAO DO BOTAO SAIR
procedure TFrm_cadastro.Bt_sairClick(Sender: TObject);
begin
  if MessageDlg('Deseja sair do cadastro?', mtConfirmation, [mbyes,mbNo], 0)= mryes then
  begin
    Application.Terminate;
  end
  else
    Abort;
end;

procedure TFrm_cadastro.FormShow(Sender: TObject);
begin
  Conexao.Connected := True;
  Q_contato.Open();

end;

end.
